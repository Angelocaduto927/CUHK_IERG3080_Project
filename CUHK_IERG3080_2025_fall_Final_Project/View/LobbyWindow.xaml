<Window x:Class="CUHK_IERG3080_2025_fall_Final_Project.View.LobbyWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Online Lobby"
        Height="420" Width="720"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">
    <Grid Margin="14">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Top row -->
        <StackPanel Orientation="Horizontal" Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="Name:" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <TextBox Width="140" Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,14,0"/>

            <TextBlock Text="Port:" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <TextBox Width="80" Text="{Binding PortText, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,14,0"/>

            <TextBlock Text="Room:" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <TextBox Width="100" Text="{Binding RoomId, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,14,0"/>

            <Button Content="Close" Width="90" Command="{Binding CloseCommand}"/>
        </StackPanel>

        <!-- Host/Join row -->
        <StackPanel Orientation="Horizontal" Grid.Row="1" Margin="0,0,0,10">
            <Button Content="Start Host" Width="120" Margin="0,0,10,0"
                    Command="{Binding StartHostCommand}"/>
            <Button Content="Join Host" Width="120"
                    Command="{Binding JoinHostCommand}"/>

            <TextBlock Text="Host IP:" VerticalAlignment="Center" Margin="18,0,8,0"/>
            <TextBox Width="180" Text="{Binding HostIp, UpdateSourceTrigger=PropertyChanged}"/>
        </StackPanel>

        <!-- Middle -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260"/>
                <ColumnDefinition Width="12"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <GroupBox Header="Share Address (copy to friend)" Grid.Column="0">
                <DockPanel Margin="8">
                    <ListBox ItemsSource="{Binding ShareAddresses}"
                             SelectedItem="{Binding SelectedShareAddress}"
                             MinHeight="140"/>
                    <Button Content="Copy Selected"
                            DockPanel.Dock="Bottom"
                            Margin="0,8,0,0"
                            Height="30"
                            Command="{Binding CopyAddressCommand}"/>
                </DockPanel>
            </GroupBox>

            <GroupBox Header="Log" Grid.Column="2">
                <ListBox ItemsSource="{Binding Logs}" Margin="8"/>
            </GroupBox>
        </Grid>

        <!-- Bottom -->
        <DockPanel Grid.Row="3" Margin="0,12,0,0">
            <TextBlock Text="{Binding StatusText}" VerticalAlignment="Center" />
            <Button Content="OK (Go Song Select)"
                    DockPanel.Dock="Right"
                    Width="160" Height="34"
                    Command="{Binding OkCommand}"
                    IsEnabled="{Binding IsConnected}"/>
        </DockPanel>
    </Grid>
</Window>
