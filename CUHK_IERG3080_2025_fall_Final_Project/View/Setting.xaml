<UserControl x:Class="CUHK_IERG3080_2025_fall_Final_Project.View.Setting"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:vm="clr-namespace:CUHK_IERG3080_2025_fall_Final_Project.ViewModel"
             mc:Ignorable="d"
             d:DesignHeight="450"
             d:DesignWidth="800">
	<UserControl.DataContext>
		<vm:SettingVM />
	</UserControl.DataContext>

	<UserControl.Background>
		<ImageBrush ImageSource="/Assets/Image/InGameBG.png"
                    Stretch="UniformToFill" />
	</UserControl.Background>

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<!-- Center panel with title: two rectangles side-by-side -->
		<Grid Grid.Row="0" HorizontalAlignment="Center" VerticalAlignment="Center" Width="520" Margin="0,8">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
			</Grid.RowDefinitions>

			<!-- Title -->
			<TextBlock Grid.Row="0"
                       Text="Settings"
                       FontSize="20"
                       FontWeight="SemiBold"
                       Foreground="#FF1E1E1E"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,8"/>

			<!-- Two-column content -->
			<Grid Grid.Row="1">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="1*" />
					<ColumnDefinition Width="1*" />
				</Grid.ColumnDefinitions>

				<!-- Left rectangle: slider on top -->
				<Border Grid.Column="0"
                        Margin="6"
                        Background="#FF1E1E1E"
                        BorderBrush="#FFFFD700"
                        BorderThickness="2"
                        CornerRadius="6"
                        Padding="12">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="*" />
						</Grid.RowDefinitions>

						<TextBlock Text="Player 1"
                                   Foreground="#FFFFD700"
                                   FontWeight="SemiBold"
                                   FontSize="14"
                                   Grid.Row="0"
                                   Margin="0,0,0,8" />

						<StackPanel Grid.Row="1"
                                    Orientation="Vertical"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Top">

							<StackPanel Orientation="Horizontal">
								<TextBlock Text="Speed: "
                                           Foreground="#FFFFD700"
                                           Margin="4,0,4,6"/>
								<TextBlock Text="{Binding Player1Speed}"
                                           Foreground="LightBlue"
                                           Margin="0,0,0,6"/>
							</StackPanel>

							<Slider Minimum="1"
                                    Maximum="4"
                                    Value="{Binding Player1Speed, Mode=TwoWay}"
                                    TickFrequency="1"
                                    IsSnapToTickEnabled="True"
                                    HorizontalAlignment="Stretch"/>

							<Rectangle Height="12" Fill="Transparent" />

							<!-- Key-bind rows (label + bind button) -->
							<Grid Margin="0,6,6,0" Height="36">
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition Width="120" />
								</Grid.ColumnDefinitions>
								<TextBlock Text="Blue Key 1"
                                           VerticalAlignment="Center"
                                           Foreground="#FFFFD700" />
								<Button x:Name="KeyBindActionA"
                                        Grid.Column="1"
                                        Content="Unassigned"
                                        Click="RebindKey_Click"
                                        HorizontalAlignment="Stretch" />
							</Grid>

							<Grid Margin="0,6,6,0" Height="36">
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition Width="120" />
								</Grid.ColumnDefinitions>
								<TextBlock Text="Blue Key 2"
                                           VerticalAlignment="Center"
                                           Foreground="#FFFFD700" />
								<Button x:Name="KeyBindActionB"
                                        Grid.Column="1"
                                        Content="Unassigned"
                                        Click="RebindKey_Click"
                                        HorizontalAlignment="Stretch" />
							</Grid>

							<Grid Margin="0,6,6,0" Height="36">
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition Width="120" />
								</Grid.ColumnDefinitions>
								<TextBlock Text="Red Key 1"
                                           VerticalAlignment="Center"
                                           Foreground="#FFFFD700" />
								<Button x:Name="KeyBindActionC"
                                        Grid.Column="1"
                                        Content="Unassigned"
                                        Click="RebindKey_Click"
                                        HorizontalAlignment="Stretch" />
							</Grid>

							<Grid Margin="0,6,6,0" Height="36">
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition Width="120" />
								</Grid.ColumnDefinitions>
								<TextBlock Text="Red Key 2"
                                           VerticalAlignment="Center"
                                           Foreground="#FFFFD700" />
								<Button x:Name="KeyBindActionD"
                                        Grid.Column="1"
                                        Content="Unassigned"
                                        Click="RebindKey_Click"
                                        HorizontalAlignment="Stretch" />
							</Grid>
						</StackPanel>
					</Grid>
				</Border>

				<!-- Right rectangle: duplicated left rectangle for Player 2 -->
				<Border Grid.Column="1"
                        Margin="6"
                        Background="#FF1E1E1E"
                        BorderBrush="#FFFFD700"
                        BorderThickness="2"
                        CornerRadius="6"
                        Padding="12">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto"/>
							<RowDefinition Height="*" />
						</Grid.RowDefinitions>

						<TextBlock Text="Player 2"
                                   Foreground="#FFFFD700"
                                   FontWeight="SemiBold"
                                   FontSize="14"
                                   Grid.Row="0"
                                   Margin="0,0,0,8" />

						<StackPanel Grid.Row="1"
                                    Orientation="Vertical"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Top">

							<StackPanel Orientation="Horizontal">
								<TextBlock Text="Speed: "
                                           Foreground="#FFFFD700"
                                           Margin="4,0,4,6"/>
								<TextBlock Text="{Binding Player2Speed}"
                                           Foreground="LightBlue"
                                           Margin="0,0,0,6"/>
							</StackPanel>

							<Slider Minimum="1"
                                    Maximum="4"
                                    Value="{Binding Player2Speed, Mode=TwoWay}"
                                    TickFrequency="1"
                                    IsSnapToTickEnabled="True"
                                    HorizontalAlignment="Stretch"/>

							<Rectangle Height="12" Fill="Transparent" />

							<!-- Key-bind rows for Player 2 (label + bind button) -->
							<Grid Margin="0,6,6,0" Height="36">
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition Width="120" />
								</Grid.ColumnDefinitions>
								<TextBlock Text="Blue Key 1"
                                           VerticalAlignment="Center"
                                           Foreground="#FFFFD700" />
								<Button x:Name="KeyBindActionA2"
                                        Grid.Column="1"
                                        Content="Unassigned"
                                        Click="RebindKey_Click"
                                        HorizontalAlignment="Stretch" />
							</Grid>

							<Grid Margin="0,6,6,0" Height="36">
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition Width="120" />
								</Grid.ColumnDefinitions>
								<TextBlock Text="Blue Key 2"
                                           VerticalAlignment="Center"
                                           Foreground="#FFFFD700" />
								<Button x:Name="KeyBindActionB2"
                                        Grid.Column="1"
                                        Content="Unassigned"
                                        Click="RebindKey_Click"
                                        HorizontalAlignment="Stretch" />
							</Grid>

							<Grid Margin="0,6,6,0" Height="36">
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition Width="120" />
								</Grid.ColumnDefinitions>
								<TextBlock Text="Red Key 1"
                                           VerticalAlignment="Center"
                                           Foreground="#FFFFD700" />
								<Button x:Name="KeyBindActionC2"
                                        Grid.Column="1"
                                        Content="Unassigned"
                                        Click="RebindKey_Click"
                                        HorizontalAlignment="Stretch" />
							</Grid>

							<Grid Margin="0,6,6,0" Height="36">
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition Width="120" />
								</Grid.ColumnDefinitions>
								<TextBlock Text="Red Key 2"
                                           VerticalAlignment="Center"
                                           Foreground="#FFFFD700" />
								<Button x:Name="KeyBindActionD2"
                                        Grid.Column="1"
                                        Content="Unassigned"
                                        Click="RebindKey_Click"
                                        HorizontalAlignment="Stretch" />
							</Grid>
						</StackPanel>
					</Grid>
				</Border>
			</Grid>
		</Grid>

		<!-- Navigation / Back button -->
		<Button Grid.Row="1"
                Content="Back"
                Width="140"
                Height="40"
                HorizontalAlignment="Center"
                VerticalAlignment="Bottom"
                Margin="0,12,0,12"
                Command="{Binding DataContext.TitleScreenCommand, RelativeSource={RelativeSource AncestorType=Window}}"/>
	</Grid>
</UserControl>
